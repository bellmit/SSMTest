package cn.gtmap.onemap.platform.service.impl;

import cn.gtmap.onemap.platform.BaseServiceTest;
import org.junit.Test;
import org.springframework.beans.factory.annotation.Autowired;

import java.io.File;

/**
 * @author: <a href="mailto:yxfacw@live.com">yingxiufeng</a>
 * @date: 2014-06-19 下午4:05
 * @version: 1.0
 */
public class AgsGeometryServiceImplTest extends BaseServiceTest{


    @Autowired
    private AgsGeometryServiceImpl agsGeometryService;

    @Test
    public void testImportShapefile(){

        String fileName = "d:\\320411jctb.shp";
        String fileName1 = "d:\\DLTB.shp";
        File file = new File(fileName1);
        if(!file.exists())
            print("file not exist");
        String geometry = agsGeometryService.importShape(file);
        print(geometry);
        String xxx="{\"result\":[[37697643.90688703,3530888.71036378,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37697643.90688703,3530888.71036378,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37697749.08410218,3530911.41546425,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37697749.08410218,3530911.41546425,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37697749.08410218,3530911.41546425,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37697935.19079646,3530953.91594372,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37697935.19079646,3530953.91594372,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37698235.4098236,3531025.38785178,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37698417.74509138,3531070.98389576,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"],[37698417.74509138,3531070.98389576,\"{\\\"proids\\\":[{\\\"sketchs\\\":\\\"null\\\",\\\"proId\\\":\\\"61cff6e9-25e4-4a5d-97c9-c18da82a083e\\\",\\\"detail\\\":\\\"{XM_ZT=0, PZ_WH=, gsxkz=0, SJ_JG_SJ=, DKMC=, DG_SJ=, LAND_USER=, JG_SJ=, TD_YT=, SFYSWF=0, BH=, XM_MC=, YSWFSM=, SJ_DG_SJ=, TD_ZL=, GD_GUID=, DKMJ=}\\\",\\\"dataSource\\\":0,\\\"geo\\\":\\\"null\\\"}],\\\"planId\\\":\\\"65e1056eaeae47db8ff40ef0a3954f61\\\"}\"]],\"success\":true}";
        String test="{\"result\":[{\"createAt\":1428631607093,\"detail\":{},\"deviceId\":\"359908051295716\",\"enabled\":true,\"id\":\"014ca1151f6e8a8580164c9bb83b481f\",\"regionCode\":\"320582\",\"regionName\":\"张家港市\",\"reported\":0,\"userAlias\":\"陈国浩\",\"userName\":\"cgh\",\"userOrg\":\"凤凰分局(监察科)\",\"x\":50809.38464039,\"y\":96208.65093497},{\"createAt\":1428631542912,\"detail\":{},\"deviceId\":\"359908051294727\",\"enabled\":true,\"id\":\"014ca1139dc28a8580164c9bb83b3bca\",\"regionCode\":\"320505\",\"regionName\":\"高新区\",\"reported\":0,\"userAlias\":\"蔡良\",\"userName\":\"cl\",\"userOrg\":\"城区分局(监察科)\",\"x\":37910.19822069,\"y\":46099.64127361},{\"createAt\":1428631498693,\"detail\":{\"name\":\"\",\"planId\":\"51cb85eec0714201b49cff13017e1f7e\",\"proids\":[{\"proName\":\"\"}],\"startTime\":\"2015-04-09 12:53:22\"},\"deviceId\":\"359908051292416\",\"enabled\":true,\"id\":\"014ca1137c1e8a8580164c9bb83b39a4\",\"regionCode\":\"320581\",\"regionName\":\"常熟市\",\"reported\":0,\"userAlias\":\"陈正新\",\"userName\":\"czx\",\"userOrg\":\"古里镇(监察科)\",\"x\":78634.23503371,\"y\":80129.35824558},{\"createAt\":1428631452686,\"detail\":{\"name\":\"\",\"planId\":\"4f5a81f1008a496a9f68cfeed46be311\",\"proids\":[{\"proName\":\"\"},{\"proName\":\"\"}],\"startTime\":\"2015-04-08 02:30:32\"},\"deviceId\":\"359908051293554\",\"enabled\":true,\"id\":\"014ca11225778a8580164c9bb83b372c\",\"regionCode\":\"320585\",\"regionName\":\"太仓市\",\"reported\":0,\"userAlias\":\"顾佳\",\"userName\":\"gj\",\"userOrg\":\"城厢镇所（监察科）\",\"x\":99747.79275865,\"y\":68826.9441932},{\"createAt\":1428631411580,\"detail\":{},\"deviceId\":\"359908051295377\",\"enabled\":true,\"id\":\"014ca11225688a8580164c9bb83b3728\",\"regionCode\":\"320585\",\"regionName\":\"太仓市\",\"reported\":0,\"userAlias\":\"韩小翔\",\"userName\":\"hxx\",\"userOrg\":\"璜泾镇所(监察科)\",\"x\":99987.47338535,\"y\":82306.12021522},{\"createAt\":1428631583759,\"detail\":{},\"deviceId\":\"359908051293638\",\"enabled\":true,\"id\":\"014ca114b7798a8580164c9bb83b4287\",\"regionCode\":\"320506\",\"regionName\":\"吴中区\",\"reported\":0,\"userAlias\":\"蒋靖荣\",\"userName\":\"jjr\",\"userOrg\":\"光福中心所(监察科)\",\"x\":34242.93025112,\"y\":41473.50622151},{\"createAt\":1428631223659,\"detail\":{},\"deviceId\":\"359908051292473\",\"enabled\":true,\"id\":\"014ca1151f208a8580164c9bb83b480b\",\"regionCode\":\"320582\",\"regionName\":\"张家港市\",\"reported\":0,\"userAlias\":\"季佩欣\",\"userName\":\"jpx\",\"userOrg\":\"保税区(金港)分局(监察科)\",\"x\":41053.4502894,\"y\":115820.22201163},{\"createAt\":1428631438349,\"detail\":{},\"deviceId\":\"359908051294370\",\"enabled\":true,\"id\":\"014ca11225778a8580164c9bb83b372b\",\"regionCode\":\"320585\",\"regionName\":\"太仓市\",\"reported\":0,\"userAlias\":\"沈福根\",\"userName\":\"shenfugen\",\"userOrg\":\"沙溪镇所(监察科)\",\"x\":90917.35377035,\"y\":71459.8621333},{\"createAt\":1428631481237,\"detail\":{},\"deviceId\":\"359908051296482\",\"enabled\":true,\"id\":\"014ca1137c0f8a8580164c9bb83b39a1\",\"regionCode\":\"320581\",\"regionName\":\"常熟市\",\"reported\":0,\"userAlias\":\"沈建明\",\"userName\":\"sjm\",\"userOrg\":\"常熟市局(监察科)\",\"x\":83502.63966594,\"y\":93061.14243603},{\"createAt\":1428631596105,\"detail\":{},\"deviceId\":\"359908051293042\",\"enabled\":true,\"id\":\"014ca11456468a8580164c9bb83b410d\",\"regionCode\":\"320583\",\"regionName\":\"昆山市\",\"reported\":0,\"userAlias\":\"孙志宏\",\"userName\":\"szh\",\"userOrg\":\"千灯分局(监察科)\",\"x\":87296.82438697,\"y\":39932.43835094},{\"createAt\":1428631582854,\"detail\":{},\"deviceId\":\"359908051441682\",\"enabled\":true,\"id\":\"014ca1141dd98a8580164c9bb83b3d83\",\"regionCode\":\"320507\",\"regionName\":\"相城区\",\"reported\":0,\"userAlias\":\"汪澄丽\",\"userName\":\"wcl\",\"userOrg\":\"开发区支局\",\"x\":56284.6020468,\"y\":64324.14038702},{\"createAt\":1428631562621,\"detail\":{},\"deviceId\":\"359908050851477\",\"enabled\":true,\"id\":\"014ca1141dd98a8580164c9bb83b3d81\",\"regionCode\":\"320507\",\"regionName\":\"相城区\",\"reported\":0,\"userAlias\":\"王明芳\",\"userName\":\"wmf\",\"userOrg\":\"黄埭支局\",\"x\":43187.15808742,\"y\":55226.0787282},{\"createAt\":1428631492921,\"detail\":{},\"deviceId\":\"359908051292408\",\"enabled\":true,\"id\":\"014ca1137c1e8a8580164c9bb83b39a3\",\"regionCode\":\"320581\",\"regionName\":\"常熟市\",\"reported\":0,\"userAlias\":\"王卫清\",\"userName\":\"wwq\",\"userOrg\":\"沙家浜镇(监察科)\",\"x\":74848.35360263,\"y\":70646.10769619},{\"createAt\":1428631452548,\"detail\":{},\"deviceId\":\"359908051294537\",\"enabled\":true,\"id\":\"014ca1137c0f8a8580164c9bb83b399d\",\"regionCode\":\"320581\",\"regionName\":\"常熟市\",\"reported\":0,\"userAlias\":\"王祥华\",\"userName\":\"wxh\",\"userOrg\":\"常熟市局(监察科)\",\"x\":83481.96926949,\"y\":93065.13304226},{\"createAt\":1428631461157,\"detail\":{},\"deviceId\":\"359908051292283\",\"enabled\":true,\"id\":\"014ca11225778a8580164c9bb83b372d\",\"regionCode\":\"320585\",\"regionName\":\"太仓市\",\"reported\":0,\"userAlias\":\"徐建\",\"userName\":\"xujian\",\"userOrg\":\"双凤镇所(监察科)\",\"x\":94410.2075001,\"y\":68517.80058883},{\"createAt\":1428631577955,\"detail\":{},\"deviceId\":\"359908051352368\",\"enabled\":true,\"id\":\"014ca1141dd98a8580164c9bb83b3d82\",\"regionCode\":\"320507\",\"regionName\":\"相城区\",\"reported\":0,\"userAlias\":\"杨刚\",\"userName\":\"yg\",\"userOrg\":\"元和支局（监察科）\",\"x\":57012.06206139,\"y\":51094.50298213},{\"createAt\":1428631584398,\"detail\":{},\"deviceId\":\"359908051296672\",\"enabled\":true,\"id\":\"014ca114b7888a8580164c9bb83b4288\",\"regionCode\":\"320506\",\"regionName\":\"吴中区\",\"reported\":0,\"userAlias\":\"袁建伟\",\"userName\":\"yjw\",\"userOrg\":\"东山中心所(监察科)\",\"x\":37686.4932754,\"y\":20285.7067962},{\"createAt\":1428631488615,\"detail\":{},\"deviceId\":\"359908050851444\",\"enabled\":true,\"id\":\"014ca1137c1e8a8580164c9bb83b39a2\",\"regionCode\":\"320581\",\"regionName\":\"常熟市\",\"reported\":0,\"userAlias\":\"于敏\",\"userName\":\"ym\",\"userOrg\":\"常熟市局(监察科)\",\"x\":83477.75047745,\"y\":93080.78680582},{\"createAt\":1428631568814,\"detail\":{\"name\":\"\",\"planId\":\"6beb122666be4b2db7f1a3ec14d923c6\",\"proids\":[{\"proName\":\"\"},{\"proName\":\"\"},{\"proName\":\"\"}],\"startTime\":\"2015-04-08 09:31:03\"},\"deviceId\":\"359908051295773\",\"enabled\":true,\"id\":\"014ca114b7798a8580164c9bb83b4285\",\"regionCode\":\"320506\",\"regionName\":\"吴中区\",\"reported\":0,\"userAlias\":\"朱斌华\",\"userName\":\"zbh\",\"userOrg\":\"吴中区局(监察科)\",\"x\":32038.45875683,\"y\":34278.12628176},{\"createAt\":1428631610899,\"detail\":{},\"deviceId\":\"359908051293828\",\"enabled\":true,\"id\":\"014ca1151f6e8a8580164c9bb83b4820\",\"regionCode\":\"320582\",\"regionName\":\"张家港市\",\"reported\":0,\"userAlias\":\"张峰鹰\",\"userName\":\"zfy\",\"userOrg\":\"大新所(监察科)\",\"x\":44930.79537154,\"y\":114482.13820685},{\"createAt\":1428631576121,\"detail\":{\"name\":\"\",\"planId\":\"f74a1a920f194561b36195730a0d520a\",\"proids\":[{\"proName\":\"\"},{\"proName\":\"\"},{\"proName\":\"\"},{\"proName\":\"\"},{\"proName\":\"\"},{\"proName\":\"\"}],\"startTime\":\"2015-04-08 09:13:13\"},\"deviceId\":\"359908051296516\",\"enabled\":true,\"id\":\"014ca11456468a8580164c9bb83b410b\",\"regionCode\":\"320583\",\"regionName\":\"昆山市\",\"reported\":0,\"userAlias\":\"赵晖\",\"userName\":\"zh\",\"userOrg\":\"玉山镇分局（监察科）\",\"x\":88082.54971881,\"y\":46518.20449945},{\"createAt\":1428631597717,\"detail\":{\"name\":\"\",\"planId\":\"b4a313dcc45f4200b1adb431ecc9c0a7\",\"proids\":[{\"proName\":\"\"}],\"startTime\":\"2015-04-10 08:21:42\"},\"deviceId\":\"359908051293414\",\"enabled\":true,\"id\":\"014ca1151f6e8a8580164c9bb83b481e\",\"regionCode\":\"320582\",\"regionName\":\"张家港市\",\"reported\":0,\"userAlias\":\"朱建华\",\"userName\":\"zjh\",\"userOrg\":\"塘桥镇分局（监察科）\",\"x\":62115.74049432,\"y\":97050.12585755},{\"createAt\":1428631581200,\"detail\":{},\"deviceId\":\"359908051293182\",\"enabled\":true,\"id\":\"014ca114b7798a8580164c9bb83b4286\",\"regionCode\":\"320506\",\"regionName\":\"吴中区\",\"reported\":0,\"userAlias\":\"左韬\",\"userName\":\"zt\",\"userOrg\":\"木渎中心所(监察科)\",\"x\":44133.38413235,\"y\":40633.67079682},{\"createAt\":1428631587503,\"detail\":{},\"deviceId\":\"359908051274869\",\"enabled\":true,\"id\":\"014ca1141dd98a8580164c9bb83b3d84\",\"regionCode\":\"320507\",\"regionName\":\"相城区\",\"reported\":0,\"userAlias\":\"朱晓东\",\"userName\":\"zxd\",\"userOrg\":\"相城区局(监察科)\",\"x\":56241.93549763,\"y\":64343.45723038},{\"createAt\":1428631456901,\"detail\":{},\"deviceId\":\"359908051292440\",\"enabled\":true,\"id\":\"014ca1137c0f8a8580164c9bb83b399e\",\"regionCode\":\"320581\",\"regionName\":\"常熟市\",\"reported\":0,\"userAlias\":\"赵晓华\",\"userName\":\"zxh\",\"userOrg\":\"碧溪镇(监察科)\",\"x\":79967.07988282,\"y\":93141.3096553}],\"success\":true}";
    }

    @Test
    public void testGetArea() throws Exception {

        String wkt = "POLYGON (( 119.88870588 32.2502926, 119.88874048 32.25028496, 119.88875004 32.25028443, 119.88876151 32.25027678, 119.8888731 32.25021943, 119.88890017 32.25021107, 119.88892971 32.25018368, 119.88893746 32.25017782, 119.88898434 32.25019581, 119.88901467 32.25021523, 119.88905953 32.2502342, 119.88886659 32.25034035, 119.88870588 32.2502926))";
        double area = agsGeometryService.getGeometryArea(wkt);
        print(area);
    }
}
